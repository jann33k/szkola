X - numer w dzienniku, w moim przypadku 9, więc go użyję.

Zad 1.
Zalogować się do systemu raczej każdy potrafi

Zad 2.
No pierw potrzebujesz kilka komend by to wykonać
> apt update
> apt upgrade
> apt install ifupdown
Teraz możesz edytować plik
> nano /etc/network/interfaces
- - - -
#enp0s3
auto enp0s3
#allow-hotplug enp0s3
iface enp0s3 inet dhcp

#enp0s8
auto enp0s8
allow-hotplug enp0s8
iface enp0s8 inet static
  address 172.130.9.1
  netmask 255.255.0.0
  gateway 172.130.9.254
- - - -
W sumie to chuj wie o co chodzi z tym DNS więc pierdole to elo
Teraz ładnie restartuj usługi
> /etc/init.d/networking restart
No i sprawdź se jak się zrobiło
> ip a

Zad 3 i 4. (razem)
Zaintaluj ten server DHCP
> apt install isc-dhcp-server
No i pliczek bierz w obroty
> nano /etc/dhcp/dhcpd.conf
No i znajdź sobie też ten wpis "A slightly" i go zmień
- - - -
#enp0s8
 subnet 172.130.9.1 netmask 255.255.0.0 {
  range 172.130.9.20 172.130.9.220;
  option domain-name-servers 208.67.222.123,208.67.220.123;
  option domain_name "nazwisko.local";
  option subnet-mask 255.255.0.0;
  option routers 172.130.9.1;
  option broadcast-address 172.130.9.255;  # Samemu musisz se wyliczyć xd ale po prostu na końcu 255
  default-lease-time 172800;   # Dzierżawa na 2 dni to będzie 60*60*24*2 sekund, czyli 172800 ;; sekundy*minuty*godziny*dni
  max-lease-time 172800;
}
- - - -
No i oprócz tego musisz jeszcze określić w innym pliku xd
> nano /etc/default/isc-dhcp-server
No i dodać wpiske o enp0s8
- - - -
INTERFACESV4="enp0s8"
- - - -
Musisz jeszcze restartować usługi loool
> /etc/init.d/isc-dhcp-server restart
> /etc/init.d/isc-dhcp-server status

Zad 5.
Włącz Windows Clienta xd zobacz czy się łączy i se ip sprawdź
aha musisz to wpisać najlepiej:
> ipconfig /release
> ipconfig /renew
> ipconfig

Zad 6.
Zarezerwuj adres 172.130.9.60 dla Windowsa
Musisz w Windowsie wpisać:
> ipconfig /all
Po czym znajdź adres MAC karty sieciowej, jest potrzebny.
Wróć do Linuxa i znowu zajrzyj do tego samego pliczku:
> nano /etc/dhcp/dhcpd.conf
Znajdź ten wpis "host fantasia" jak wcześniej i go edytuj
- - - -
host client {
 hardware ethernet [adres mac];
 fixed-address 172.130.9.60;
- - - -

Zad 7 i 8.
Samobójstwo. Jebane IPTABLES. Firewall.
> touch /etc/init.d/firewall
> chmod a+x /etc/init.d/firewall
> nano /etc/init.d/firewall
Edytować to gówno jebane trzeba zakuć i tyle D:
- - - -
ifconfig enp0s3 10.0.2.15 netmask 255.255.0.0
ifconfig enp0s8 172.130.9.1 netmask 255.255.0.0     # NIE MAM PEWNOŚCI MUSISZ W IP A SPRAWDZIC DO ENP0S3
ip route add default via 10.0.2.1

#Routing
iptables -F
iptables -F -t nat
iptables -P INPUT ACCEPT
iptables -P FORWARD ACCEPT
iptables -X

#Internet
echo 1 > /proc/sys/net/ipv4/ip_forward

#NAT - translacja adresów
iptables -t nat -A POSTROUTING -o -enp0s3 -j MASQUERADE
iptables -A FORWARD -o enp0s8 -j ACCEPT

#Blokada stron
iptables -I FORWARD -m --string "www.betony.pl" --algo bm -j DROP
iptables -I FORWARD -m --string "www.kotlet.pl" --algo bm -j DROP
- - - -
Zainstaluj iptables.
> apt install iptables


To chyba koniec. Mam dość. Mam nadzieje że komuś innemu się przyda.
